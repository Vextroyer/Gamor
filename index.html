<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="image/favicon.ico">
    <title>Gamor</title>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/themes.css">
    <style>
        .main-section-container{
            display: grid;
            grid-template-columns: 30% 40% 30%;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: auto;
            margin-top: 5vh;
        }
        .main-section-item{
            height: 70vh;
        }
    </style>
</head>
<body class="light-theme" onload="RefreshSearch()">

    <header class="header-grid-container">

        <nav class="header-grid-item">
            <ul class="header-link-list-grid-container">
                <li><a href="index.html">Home</a></li>
                <li><a href="streams.html">Streams</a></li>
                <li><a href="party.html">Party</a></li>
                <li><a href="premium.html">Premium</a></li>
            </ul>
        </nav>

        <h1 style="text-align: center;" class="header-grid-item">Gamor</h1>

        <nav class="header-grid-item">
            <ul class="header-action-grid-container">
                <li><a href="login.html">Log in</a></li>
                <li><a href="register.html" id="create-account-button">Create account</a></li>
            </ul>
        </nav>

        <button class="button-change-theme" onclick="ToggleTheme()">
            <img src="image/sun.svg" alt="" id="theme-change-icon" title="Change theme.">
        </button>

    </header>

    <main>
        
        <div class="main-section-container light-secondary-background">
            <div class="main-section-item" style="border-top-left-radius: 20px;border-bottom-left-radius: 20px;background-image: url(image/insert_image_here.svg);background-repeat: no-repeat;">
                <div style="height: 70%;"></div>
                <ul style="text-align: center;display: grid;grid-template-columns: auto auto;margin-left: 0px;padding-left: 0px;">
                    <li><a href="register.html">Create account</a></li>
                    <li><a href="login.html">Sign in</a></li>
                </ul>
            </div>
            
            <div class="main-section-item" style="background-image: url(image/purpletau.webp);background-size: cover;">
                <p style="color: white;text-align: center;">Warhammer 40k new session</p>
            </div>
            
            <div class="main-section-item" style="border-top-right-radius: 20px;border-bottom-right-radius: 20px;">
                <ol>
                    <li>
                        <header><h2>Choose Platform</h2></header>
                        <form>
                            <input type="radio" id="party-radio-button" value="party" name="platform-selector" checked="checked">
                            <label for="party-radio-button">Party</label>
                            <input type="radio" id="match-radio-button" value="match" name="platform-selector">
                            <label for="match-radio-button">Match</label>
                            <input type="radio" id="streams-radio-button" value="streams" name="platform-selector">
                            <label for="streams-radio-button">Streams</label>
                        </form>
                    </li>
                    <li>
                        <header><h2>Searching Game</h2></header>

                        <select>
                            <optgroup>
                                <option value="cod" name="game-selector">COD Warzone</option>
                                <option value="wah" name="game-selector">Warhammer 40k</option>
                                <option value="wow" name="game-selector">World of Warcraft</option>
                            </optgroup>
                        </select>
                        
                        <ol id="search-result-list">

                        </ol>

                        <input type="submit" value="Search now" onclick="RefreshSearch()">
                    </li>
                </ol>
            </div>
        </div>

        <section style="margin: 5%;">
            <h2>Trending Categories</h2>
            <ol class="categories-grid-container">
                <li class="categories-grid-item light-secondary-background">Action Games</li>
                <li class="categories-grid-item light-secondary-background">Sports Games</li>
                <li class="categories-grid-item light-secondary-background">Adventure Games</li>
                <li class="categories-grid-item light-secondary-background">Arcade Games</li>
                <li class="categories-grid-item light-secondary-background">Fantasy Games</li>
                <li class="categories-grid-item light-secondary-background">Strategy Games</li>
                <li class="categories-grid-item light-secondary-background">Shooter Games</li>
            </ol>
        </section>
    </main>
    
    <script>
        function RefreshSearch(){
            //Define (platform,game) -> Collection  relations
            // Platforms : party, match , stream
            // Game : cod, wah, wow
            let relation = new Map([
                [ "partycod",["Out1","Out2","Out3"] ],
                [ "partywah",["Out4","Out5","Out6","Out7"] ],
                [ "partywow", ["Out8","Out9"] ],

                [ "matchcod",["Out10","Out11"] ],
                [ "matchwah",["Out12","Out13","Out14","Out15","Out16"] ],
                [ "matchwow",["Out17"] ],

                [ "streamscod",["Out18","Out19"] ],
                [ "streamswah",["Out20","Out21","Out22"] ],
                [ "streamswow",["Out23"] ]
            ])

            //Retrieve the results associated with the search
            let searchData = relation.get(GetSelectedPlatform()+GetSelectedGame());
            
            //Retrieve the HTML element that will display the results
            let searchResultElement = document.getElementById("search-result-list");
            // Remove its child elements
            //searchResultElement.replaceChildren();//doesnt work on my Edge
            while(searchResultElement.firstChild){
                searchResultElement.removeChild(searchResultElement.lastChild);
            }
            
            //Assign it new child with the fresh content. 
            for(let i =0;i<searchData.length;++i){
                let li = document.createElement("li");
                li.appendChild(document.createTextNode(searchData[i]));
                searchResultElement.appendChild(li);
            }
        }
        function GetSelectedPlatform(){
            //Retrieve the platform radio buttons
            let platforms = document.getElementsByName("platform-selector");

            //Return the value of the selected radio button
            for (radioButton of platforms){
                if(radioButton.checked){
                    return radioButton.value;
                }
            }
        }
        function GetSelectedGame(){
            //Retrieve the game options
            let games = document.getElementsByName("game-selector");

            //Return the value of the selected option
            for (option of games){
                if(option.selected){
                    return option.value;
                }
            }
        }
        function ToggleTheme(){
            let body = document.body;
            let oldClass = "";
            let newClass = "";
            if(body.className === "light-theme"){
                body.className = "dark-theme";
                //Find all elements who use light-secondary-background theme class
                //and set the to use dark-secondary-background theme class
                oldClass = "light-secondary-background";
                newClass = "dark-secondary-background";
                //change theme change icon from sun to moon
                document.getElementById("theme-change-icon").setAttribute("src","image/moon.png");
            }
            else{
                body.className = "light-theme";
                oldClass = "dark-secondary-background";
                newClass = "light-secondary-background";
                //change theme change icon from moon to sun
                document.getElementById("theme-change-icon").setAttribute("src","image/sun.svg");
            }

            //Replace class of all elements of oldClass with newClass
            let elements = document.getElementsByClassName(oldClass);
            while(elements){
                elements[0].className = elements[0].className.replace(oldClass,newClass);
            }
            //If this works then , elements collection updates automatically on changes of its elements.
        }
    </script>
</body>
</html>